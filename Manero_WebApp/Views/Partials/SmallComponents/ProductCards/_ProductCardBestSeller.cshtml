@using System.Globalization;
@model Manero_WebApp.Models.Schemas.ProductModel

<a asp-controller="Home" asp-action="ProductDetails" asp-route-articleNumber="@Model.ArticleNumber" class="product-link">
    <img src="https://placehold.co/200x255" alt="@Model.Name" class="product-image">
    <div class="product-icons">
        <i class="fa-light fa-heart"></i>
        <i class="fa-light fa-bag-shopping"></i>
    </div>
    <div class="product-rating">
        @{
            var averageRating = Model.Reviews.Any() ? Model.Reviews.Average(r => r.Rating) : 0;
            var numberOfReviews = Model.Reviews.Count;
        }
        @for (var i = 0; i < (int)Math.Round(averageRating); i++)
        {
            <i class="fa-solid fa-star"></i>
        }

        @for (var i = 0; i < 5 - (int)Math.Round(averageRating); i++)
        {
            <i class="fa-regular fa-star"></i>
        }
        (@numberOfReviews)
    </div>

    <div class="product-name">@Model.Name</div>
    <div class="product-price">$@Model.Price.ToString("N2", CultureInfo.CreateSpecificCulture("en-US"))</div>
    @if (Model.Tags.Contains("sale"))
    {
        <div class="product-discount">Sale Price: $@((Model.Price * 0.5m).ToString("N2", CultureInfo.CreateSpecificCulture("en-US")))</div>

    }

</a>
