@using System.Globalization;
@model Manero_WebApp.Models.Schemas.ProductModel

<partial name="/Views/Partials/FullScreenComponents/Navbars/_TopNavbar.cshtml" />

<div class="container">
    <div class="product-details-mobile">
        <div class="product-card">
            <div class="product-image">
                <img src="https://placehold.co/200x255" alt="@Model.Name" class="product-image">
            </div>
            <h2 class="product-title">@Model.Name</h2>
            <div class="product-rating">
                @{
                    var averageRating = Model.Reviews.Any() ? Model.Reviews.Average(r => r.Rating) : 0;
                    var numberOfReviews = Model.Reviews.Count;
                }
                @for (var i = 0; i < (int)Math.Round(averageRating); i++)
                {
                    <i class="fa-solid fa-star"></i>
                }
                @for (var i = 0; i < 5 - (int)Math.Round(averageRating); i++)
                {
                    <i class="fa-regular fa-star"></i>
                }
                (@numberOfReviews)
            </div>
            <div class="product-price">$@Model.Price.ToString("N2", CultureInfo.CreateSpecificCulture("en-US"))</div>
            @if (Model.Tags.Contains("sale"))
            {
                <div class="product-discount">Sale Price: $@((Model.Price * 0.5m).ToString("N2", CultureInfo.CreateSpecificCulture("en-US")))</div>
            }
            <div class="product-size">
                <!-- Size buttons go here -->
            </div>
            <div class="product-color">
                <!-- Color buttons go here -->
            </div>
            <div class="product-description">@Model.Description</div>
            <button class="add-to-cart">+ Add to cart</button>
            <div class="product-reviews">
                @if (Model.Reviews != null && Model.Reviews.Any())
                {
                    <ul>
                        @foreach (var review in Model.Reviews)
                        {
                            <li>@review.User.FullName: @review.ReviewDescription (Rating: @review.Rating)</li>
                        }
                    </ul>
                }
                else
                {
                    <p>No reviews yet.</p>
                }
            </div>
        </div>
    </div>
</div>

<partial name="/Views/Partials/FullScreenComponents/Footer/_Footer.cshtml" />
